<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Auto-Instrumenting a NodeJS Lambda :: SUSE® Rancher Prime: Observability</title>
    <meta name="description" content="SUSE Observability">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../../../../_/css/site.css">
<link rel="stylesheet" href="../../../../../../../_/css/search.css">
<link rel="icon" href="../../../../../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../../../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../../../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../../../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../../../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<!-- <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="../../../../../../../_/css/vendor/light.css">
<script src="/docserv/res/lightheaded/analytics.js" type="text/javascript"></script>
    <script>var uiRootPath = '../../../../../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a class=" navbar-logo" href="https://documentation.suse.com/" aria-label="SUSE Documentation Home"><img class="logo"
            src="../../../../../../../_/img/logo.svg" alt="SUSE logo"/></a>
      </div>
  <div class="draft-banner">DRAFT PREVIEW ONLY!</div>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
          <label class="filter checkbox" style="display: none">
            <input type="checkbox" data-facet-filter="component:suse-observability" checked> Only this project
          </label>
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">
            <img src="../../../../../../../_/img/resources.png" class="langIcon Resources" alt="Resources" title="Resources">
          </div>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/rancher/stackstate-product-docs"><i class="fab fa-github"></i>&nbsp;SUSE Observability</a>
            <div class="has-submenu">
              <a class="navbar-item" href="#" ><i class="fas fa-file-alt"></i>&nbsp;Report Issue &nbsp;<i class="fas fa-chevron-right"></i></a>
              <div class="submenu">
                <a class="navbar-item" href="https://scc.suse.com">SCC (Recommended)</a>
                <a class="navbar-item" href="https://github.com/rancher/stackstate-product-docs/issues">GitHub Issue</a>
              </div>
            </div>
            <a class="navbar-item" href="https://github.com/rancher/product-docs-playbook/blob/main/CONTRIBUTING.md"><i class="fas fa-user-edit"></i>&nbsp;Contribute</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link"><img src="../../../../../../../_/img/language.png" class="langIcon Language" alt="Language"
              title="Language"></div>
          <div class="navbar-dropdown">
            <!--  </div><div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div> -->
              <a role="button" class="navbar-item" id="en" onclick="selectLanguage(this.id)">
                <!--<img src="../../../../../../../_/img/engFlag.svg" class="langIcon english">-->
                &nbsp;English
              </a>
            <!-- LANGUAGESELECTOR -->
          </div>
        </div>
        <!--
        <div class="navbar-item">
          <a href="https://twitter.com/SUSE">
            <img alt="X-logo" class="x-logo" src="../../../../../../../_/img/x-logo-white.png">
          </a>
        </div>
        -->
      </div>
    </div>

    <!--   <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">

        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
      </div> -->
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="suse-observability" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../../../../classic.html">SUSE Observability</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../../classic.html">SUSE Observability documentation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Get started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../k8s-quick-start-guide.html">Quick start guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../k8s-getting-started.html">SUSE Observability walk-through</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../../k8s-suse-rancher-prime.html">SUSE Rancher Prime</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../k8s-suse-rancher-prime-air-gapped.html">Air-gapped</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../k8s-suse-rancher-prime-agent-air-gapped.html">Agent Air-gapped</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../suse-cloud-observability-quick-start-guide.html">SUSE Cloud Observability</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Guided troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/troubleshooting/k8s-guided-troubleshooting.html">What is guided troubleshooting?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/troubleshooting/k8s-configuration.html">YAML configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/troubleshooting/k8s-changes.html">Changes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/troubleshooting/k8s-logs.html">Logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Monitors and alerts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/alerting/k8s-monitors.html">Monitors</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/alerting/kubernetes-monitors.html">Out of the box monitors for Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../../use/alerting/notifications/README.html">Notifications</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/alerting/notifications/configure.html">Configure notifications</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../../use/alerting/notifications/channels/README.html">Notification channels</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../../use/alerting/notifications/channels/slack.html">Slack</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../../use/alerting/notifications/channels/teams.html">Teams</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../../use/alerting/notifications/channels/webhook.html">Webhook</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../../use/alerting/notifications/channels/opsgenie.html">Opsgenie</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/alerting/notifications/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Customize</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/alerting/k8s-add-monitors-cli.html">Add a monitor using the CLI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/alerting/k8s-derived-state-monitors.html">Derived State monitors</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/alerting/k8s-dynamic-threshold-monitors.html">Dynamic Threshold monitors</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/alerting/k8s-override-monitor-arguments.html">Override monitor arguments</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/alerting/k8s-write-remediation-guide.html">Write a remediation guide</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Metrics</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/metrics/k8sTs-explore-metrics.html">Explore Metrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Custom charts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/metrics/k8s-add-charts.html">Adding custom charts to components</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/metrics/k8s-writing-promql-for-charts.html">Writing PromQL queries for representative charts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/metrics/k8sTs-metrics-troubleshooting.html">Troubleshooting custom charts</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Advanced Metrics</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/metrics/k8s-stackstate-grafana-datasource.html">Grafana Datasource</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/metrics/k8s-prometheus-remote-write.html">Prometheus remote_write</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/metrics/open-metrics.html">OpenMetrics</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Logs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/logs/k8sTs-explore-logs.html">Explore Logs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/logs/k8sTs-log-shipping.html">Log Shipping</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Traces</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/traces/k8sTs-explore-traces.html">Explore Traces</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Health</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../configure/health/health-synchronization.html">Health synchronization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../../configure/health/send-health-data/README.html">Send health data over HTTP</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../configure/health/send-health-data/send-health-data.html">Send health data</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../configure/health/send-health-data/repeat_snapshots.html">Repeat Snapshots JSON</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../configure/health/send-health-data/transactional_increments.html">Transactional Increments JSON</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../configure/health/debug-health-sync.html">Debug health synchronization</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Views</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/views/k8s-views.html">Kubernetes views</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/views/k8s-custom-views.html">Custom views</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/views/k8s-component-views.html">Component views</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/views/k8s-explore-views.html">Explore views</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../../use/views/k8s-view-structure.html">View structure</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/views/k8s-overview-perspective.html">Overview perspective</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/views/k8s-highlights-perspective.html">Highlights perspective</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/views/k8s-topology-perspective.html">Topology perspective</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/views/k8s-events-perspective.html">Events perspective</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/views/k8s-metrics-perspective.html">Metrics perspective</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/views/k8s-traces-perspective.html">Traces perspective</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/views/k8s-filters.html">Filters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../use/stackstate-ui/k8sTs-keyboard-shortcuts.html">Keyboard shortcuts</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/stackstate-ui/k8sTs-timeline-time-travel.html">Timeline and time travel</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Agent</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../k8s-network-configuration-saas.html">Network configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../agent/k8s-network-configuration-proxy.html">Proxy Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../k8s-suse-rancher-prime-agent-air-gapped.html">Using a custom registry</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../agent/k8s-custom-secrets-setup.html">Custom Secret Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../agent/k8s-custom-secrets-setup-deprecated.html">Custom Secret Management (Deprecated)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../agent/k8sTs-agent-request-tracing.html">Request tracing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../agent/k8sTs-agent-request-tracing-certificates.html">Certificates for sidecar injection</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../agent/supported-architectures.html">Supported architectures</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Open Telemetry</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../getting-started/README.html">Getting started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../concepts.html">Concepts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getting-started/getting-started-k8s.html">Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getting-started/getting-started-k8s-operator.html">Kubernetes Operator</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getting-started/getting-started-linux.html">Linux</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getting-started/getting-started-lambda.html">AWS Lambda</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../collector.html">Open telemetry collector</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../sampling.html">Sampling</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../otlp-apis.html">SUSE Observability OTLP APIs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../instrumentation/README.html">Instrumentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../instrumentation/java.html">Java</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../instrumentation/node.js.html">Node.js</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../instrumentation/node.js/auto-instrumentation-of-lambdas.html">Auto-instrumentation of Lambdas.js</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../instrumentation/dot-net.html">.NET</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../instrumentation/sdk-exporter-config.html">SDK Exporter configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">CLI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cli/cli-sts.html">SUSE Observability CLI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Self-hosted setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Install SUSE Observability</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../install-stackstate/requirements.html">Requirements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../install-stackstate/kubernetes_openshift/README.html">Kubernetes / OpenShift</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../install-stackstate/kubernetes_openshift/kubernetes_install.html">Kubernetes install</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../install-stackstate/kubernetes_openshift/openshift_install.html">OpenShift install</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../install-stackstate/kubernetes_openshift/ack.html">Alibaba Cloud ACK install</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../install-stackstate/kubernetes_openshift/affinity.html">Configure Kubernetes Affinities</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../install-stackstate/kubernetes_openshift/required_permissions.html">Required Permissions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../install-stackstate/kubernetes_openshift/customize_config.html">Override default configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../install-stackstate/kubernetes_openshift/storage.html">Configure storage</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../install-stackstate/kubernetes_openshift/ingress.html">Exposing SUSE Observability outside of the cluster</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../install-stackstate/initial_run_guide.html">Initial run guide</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../install-stackstate/troubleshooting.html">Troubleshooting</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../install-stackstate/advanced-troubleshooting.html">Advanced Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../install-stackstate/support-package-logs.html">Support Package (Logs)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Configure SUSE Observability</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../configure-stackstate/slack-notifications.html">Slack notifications</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../configure-stackstate/email-notifications.html">E-mail notifications</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../stackpacks/about-stackpacks.html">Stackpacks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../../advanced/analytics.html">Analytics</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../release-notes/README.html">Release Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/20240911112250.html">v2.0.0 - 11/09/2024</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/20240918082712.html">v2.0.1 - 18/09/2024</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/20241001154902.html">v2.0.2 - 01/10/2024</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/v2.1.0.html">v2.1.0 - 29/Oct/2024</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/v2.2.0.html">v2.2.0 - 09/Dec/2024</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/v2.2.1.html">v2.2.1 - 10/Dec/2024</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/v2.3.0.html">v2.3.0 - 30/Jan/2025</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/v2.3.1.html">v2.3.1 - 17/Mar/2025</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/v2.3.2.html">v2.3.2 - 22/Apr/2025</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/v2.3.3.html">v2.3.3 - 07/May/2025</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/v2.3.4.html">v2.3.4 - 04/Jun/2025</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/v2.3.5.html">v2.3.5 - 19/Jun/2025</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/v2.3.6.html">v2.3.6 - 23/Jul/2025</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../release-notes/v2.3.7.html">v2.3.7 - 28/Jul/2025</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../upgrade-stackstate/README.html">Upgrade SUSE Observability</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../upgrade-stackstate/migrate-from-6.html">Migration from StackState</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../upgrade-stackstate/steps-to-upgrade.html">Steps to upgrade</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../upgrade-stackstate/version-specific-upgrade-instructions.html">Version-specific upgrade instructions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../install-stackstate/kubernetes_openshift/uninstall.html">Uninstall SUSE Observability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../install-stackstate/kubernetes_openshift/no_internet/README.html">Air-gapped</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../k8s-suse-rancher-prime-air-gapped.html">SUSE Observability air-gapped</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../k8s-suse-rancher-prime-agent-air-gapped.html">SUSE Observability Kubernetes Agent air-gapped</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../data-management/README.html">Data management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../data-management/backup_restore/README.html">Backup and Restore</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../data-management/backup_restore/kubernetes_backup.html">Kubernetes backup</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../data-management/backup_restore/configuration_backup.html">Configuration backup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../data-management/data_retention.html">Data retention</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../data-management/clear_stored_data.html">Clear stored data</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../security/README.html">Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../security/authentication/README.html">Authentication</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/authentication/authentication_options.html">Authentication options</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/authentication/single_password.html">Single password</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/authentication/file.html">File-based</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/authentication/ldap.html">LDAP</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../security/authentication/oidc.html">Open ID Connect (OIDC)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../security/authentication/oidc/microsoft-entra-id.html">Microsoft Entra ID</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/authentication/keycloak.html">KeyCloak</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/authentication/service_tokens.html">Service tokens</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/authentication/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../../../security/rbac/README.html">RBAC</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/rbac/role_based_access_control.html">Role-based Access Control</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/rbac/rbac_permissions.html">Permissions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/rbac/rbac_roles.html">Roles</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../security/rbac/rbac_scopes.html">Scopes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../security/external-secrets.html">External secrets</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/security/k8s-service-tokens.html">Service Tokens</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/security/k8s-ingestion-api-keys.html">API Keys</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../use/security/self-signed-certificates.html">Self-signed certificates</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">SaaS</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../saas/user-management.html">User Management</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../develop/reference/k8sTs-stql_reference.html">SUSE Observability Query Language (STQL)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../develop/reference/k8sTs-chart-units.html">Chart units</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../configure/topology/identifiers.html">Topology Identifiers</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">SUSE Observability</span>
    <span class="version">Latest</span>
  </div>
  <ul class="components">
        <li class="component is-current">
          <div class="title"><a href="../../../../classic.html">SUSE Observability</a></div>
          <ul class="versions">
            <li class="version is-current is-latest">
              <a href="../../../../classic.html">Latest</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../classic.html" aria-label="Home" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../../classic.html">SUSE Observability</a></li>
    <li><a href="auto-instrumentation-of-lambdas.html">Auto-Instrumenting a NodeJS Lambda</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/rancher/stackstate-product-docs/edit/main/docs/latest/modules/en/pages/setup/otel/languages/node.js/auto-instrumentation-of-lambdas.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Auto-Instrumenting a NodeJS Lambda</h1>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document guides you through auto-instrumenting NodeJS Lambda functions using OpenTelemetry. Auto-instrumentation simplifies the process of adding observability to your Lambda functions by automatically capturing performance metrics and tracing information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you begin, ensure you have the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>AWS Lambda function:</strong> The function you want to instrument.</p>
</li>
<li>
<p><strong>OpenTelemetry SDK:</strong> Installed in your Lambda function.</p>
</li>
<li>
<p><strong>OpenTelemetry Collector:</strong> Deployed and configured.</p>
</li>
<li>
<p><strong>SUSE Observability:</strong> An account with SUSE Observability where you&#8217;ll send your telemetry data.</p>
</li>
<li>
<p><strong>Memory:</strong> Enough memory to run the Lambda&#8217;s including the instrumentation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_values_supplied_by_the_environment"><a class="anchor" href="#_values_supplied_by_the_environment"></a>Values supplied by the environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OpenTelemetry relies on various configuration values to function correctly. These values control aspects like data collection, exporting, and communication with backend systems. To make your OpenTelemetry deployment flexible and adaptable to different environments, you can provide these settings through environment variables. This approach offers several benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Dynamic Configuration:</strong> Easily adjust settings without code changes.</p>
</li>
<li>
<p><strong>Environment-Specific Settings:</strong> Configure OpenTelemetry differently for development, testing, and production.</p>
</li>
<li>
<p><strong>Secret Management:</strong> Securely store sensitive information like API keys.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For the OpenTelemetry setup described in this documentation, you&#8217;ll need to define the following environment variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>VERBOSITY</code>:</strong> Controls the level of detail in OpenTelemetry logs.</p>
</li>
<li>
<p><strong><code>OTLP_API_KEY</code>:</strong> Authenticates your Lambda function to send data to SUSE Observability.</p>
</li>
<li>
<p><strong><code>OTLP_ENDPOINT</code>:</strong> Specifies the address of your SUSE Observability instance.</p>
</li>
<li>
<p><strong><code>OPENTELEMETRY_COLLECTOR_CONFIG_FILE</code>:</strong> Points to the configuration file for the OpenTelemetry Collector.</p>
</li>
<li>
<p><strong><code>AWS_LAMBDA_EXEC_WRAPPER</code>:</strong> Configures the Lambda execution environment to use the OpenTelemetry handler.</p>
</li>
<li>
<p><strong><code>OTLP_INSTR_LAYER_ARN</code>:</strong> Provides the ARN (Amazon Resource Name) of the OpenTelemetry instrumentation layer, which adds the necessary components for auto-instrumentation.</p>
</li>
<li>
<p><strong><code>OTLP_COLLECTOR_LAYER_ARN</code>:</strong> Provides the ARN of the OpenTelemetry collector layer, which is responsible for receiving, processing, and exporting telemetry data.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Important Considerations:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>GRPC Endpoint:</strong> The <code>OTLP_ENDPOINT</code> should specify the gRPC endpoint of your SUSE Observability instance without any <code>http</code> or <code>https</code> prefix. Use port 443 for secure communication.</p>
</li>
<li>
<p><strong>Region-Specific Layers:</strong> Lambda layers are region-bound. Ensure that the ARNs you use for <code>OTLP_INSTR_LAYER_ARN</code> and <code>OTLP_COLLECTOR_LAYER_ARN</code> match the AWS region where your Lambda function is deployed.</p>
</li>
<li>
<p><strong>Architecture Matching:</strong> The OpenTelemetry Collector layer is architecture-specific. Choose the correct ARN for your Lambda function&#8217;s architecture (e.g., <code>amd64</code> or <code>arm64</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>A complete example: be aware you need to input your own values.</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">VERBOSITY: "normal"
OTLP_API_KEY: "&lt;your api key for sending data to SUSE Observability here&gt;"
OTLP_ENDPOINT: "&lt;your-dns-name-for-suse-observability-here&gt;:443"
OPENTELEMETRY_COLLECTOR_CONFIG_FILE: "/var/task/collector.yaml"
AWS_LAMBDA_EXEC_WRAPPER: "/opt/otel-handler"
OTLP_INSTR_LAYER_ARN: "arn:aws:lambda:&lt;aws-region&gt;:184161586896:layer:opentelemetry-nodejs-0_11_0:1"
OTLP_COLLECTOR_LAYER_ARN: "arn:aws:lambda:&lt;aws-region&gt;:184161586896:layer:opentelemetry-collector-&lt;amd64|arm64&gt;-0_12_0:1"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_collector_yaml_file"><a class="anchor" href="#_the_collector_yaml_file"></a>The collector.yaml file</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OTEL collection configuration sets up how the data collected should be distributed.  This is done in the collector.yaml file placed in the src directory where the lambda files can be found.  Below is an example collector.yaml file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># collector.yaml in the root directory
# Set an environemnt variable 'OPENTELEMETRY_COLLECTOR_CONFIG_FILE' to
# '/var/task/collector.yaml'

receivers:
  otlp:
    protocols:
      grpc:
      http:

exporters:
  debug:
    verbosity: "${env:VERBOSITY}"
  otlp/stackstate:
    headers:
      Authorization: "SUSEObservability ${env:OTLP_API_KEY}"
    endpoint: "${env:OTLP_ENDPOINT}"

service:
  pipelines:
    traces:
      receivers: [otlp]
      exporters: [debug, otlp/stackstate]
      processors: []
    metrics:
      receivers: [otlp]
      exporters: [debug, otlp/stackstate]
      processors: []</code></pre>
</div>
</div>
<div class="paragraph">
<p>Be aware this collector is used to send the data over to a next collector which then is used for tail sampling, metric aggregation, etc. before sending data over to SUSE Observability. This second collector also needs to run in the customer&#8217;s environment.</p>
</div>
<div class="paragraph">
<p>Depending on the desired functionality, or based upon factors such as volumes of data being generated by lambdas instrumented in this way, collectors can be set up for batching, tail-sampling, and other pre-processing techniques to reduce the impact on SUSE Observability.</p>
</div>
<div class="paragraph">
<p>See this page for <a href="../../proxy-collector.html" class="xref page">guidance and instruction</a> on how to set up a batching collector that acts as a security proxy for SUSE Observability.
See this page for <a href="../../collector.html" class="xref page">instructions</a> on how to set up a collector that does tail-sampling as well.
For more information about processor configuration on the opentelemetry collector, see the <a href="https://github.com/open-telemetry/opentelemetry-collector/blob/main/processor/README.md">official documentation</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../../_images/otel/aws_nodejs_otel_auto_instrumentation.svg" alt="AWS Lambda Instrumentation With Opentelemetry">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_package_json"><a class="anchor" href="#_package_json"></a>Package.json</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Make sure to add <code>"@opentelemetry/auto-instrumentations-node": "^0.55.2",</code> to <code>package.json</code> and execute <code>npm install</code> to add the auto-instrumentation client libraries to your NodeJS Lambda.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_troubleshooting"><a class="anchor" href="#_troubleshooting"></a>Troubleshooting</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_timeouts"><a class="anchor" href="#_timeouts"></a>Timeouts</h3>
<div class="paragraph">
<p>If the addition of the OTEL Lambda layers results in lambdas that time out (checking the logs might indicate that the collector was asked to shut down while still busy, e.g. seeing the following log entry):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "level": "info",
    "ts": 1736867469.2312617,
    "caller": "internal/retry_sender.go:126",
    "msg": "Exporting failed. Will retry the request after interval.",
    "kind": "exporter",
    "data_type": "traces",
    "name": "otlp/stackstate",
    "error": "rpc error: code = Canceled desc = context canceled",
    "interval": "5.125929689s"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>shortly after receiving the instruction to shut down:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "level": "info",
    "ts": 1736867468.4311068,
    "logger": "lifecycle.manager",
    "msg": "Received SHUTDOWN event"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above indicates that the allocated resources of the lambda are not sufficient to allow execution of the lambda and the additional strain added by the OTEL instrumentation.  To remedy this, the memory allocation and lambda timeout settings can be adjusted as necessary to allow the lambda to finish its work, while also allowing the telemetry collection to succeed.</p>
</div>
<div class="paragraph">
<p>Try modifying the MemorySize and TimeOut properties of the lambdas that are failing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">MemorySize: 256
Timeout: 25</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the default memory allocation is 128MB</p>
</div>
<div class="paragraph">
<p>Note the memory increment is 128MB</p>
</div>
<div class="paragraph">
<p>Note Timeout is an integer value denoting seconds.</p>
</div>
</div>
<div class="sect2">
<h3 id="_authentication_and_source_ip_filtering"><a class="anchor" href="#_authentication_and_source_ip_filtering"></a>Authentication and Source IP Filtering</h3>
<div class="paragraph">
<p>If you encounter <code>error 403 Unauthorized</code> when submitting collector data to your cluster, or to any pre-processing or proxy collector, double-check the source IP address of the VPC NAT gateway matches what is whitelisted by the collector ingress,
also double check that the chosen authentication mechanism matches source and destination, and also that credentials (secrets, etc.) are set up correctly.</p>
</div>
<div class="paragraph">
<p>For more information about configuring authentication for the opentelemetry collector, please refer to the <a href="https://github.com/open-telemetry/opentelemetry-collector/blob/main/config/configauth/README.md">official documentation</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Auto-instrumentation docs → <a href="https://opentelemetry.io/docs/faas/lambda-auto-instrument/" class="bare">https://opentelemetry.io/docs/faas/lambda-auto-instrument/</a></p>
</div>
<div class="paragraph">
<p>Collector docs → <a href="https://opentelemetry.io/docs/faas/lambda-collector/" class="bare">https://opentelemetry.io/docs/faas/lambda-collector/</a></p>
</div>
<div class="paragraph">
<p>GitHub Releases Page for finding latest ARNs → <a href="https://github.com/open-telemetry/opentelemetry-lambda/releases" class="bare">https://github.com/open-telemetry/opentelemetry-lambda/releases</a></p>
</div>
<div class="paragraph">
<p>OTLP Exporter Configuration → <a href="https://opentelemetry.io/docs/languages/sdk-configuration/otlp-exporter/" class="bare">https://opentelemetry.io/docs/languages/sdk-configuration/otlp-exporter/</a></p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script src="../../../../../../../_/js/site.js"></script>
<script async src="../../../../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../../../.." data-snippet-length="100" data-stylesheet="../../../../../../../_/css/search.css"></script>
<script async src="../../../../../../../search-index.js"></script>
<script src="../../../../../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../../../../../_/js/vendor/tabs.js"></script>


  </body>
</html>
